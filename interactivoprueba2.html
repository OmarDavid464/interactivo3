<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Partes del Auto Interactivo - Con Libro de Visitas</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    .auto-container {
      position: relative;
      max-width: 600px;
      margin: auto;
    }
    img.auto {
      width: 100%;
      display: block;
    }
    .marker {
      position: absolute;
      background: #ff4444;
      color: white;
      font-weight: bold;
      width: 24px;
      height: 24px;
      text-align: center;
      line-height: 24px;
      border-radius: 50%;
      cursor: pointer;
      user-select: none;
      transition: all 0.3s ease;
      box-shadow: 0 2px 5px rgba(0,0,0,0.3);
    }
    .marker:hover {
      background: #ff6666;
      transform: scale(1.3);
      box-shadow: 0 4px 12px rgba(255,68,68,0.5);
      z-index: 10;
    }
    .marker::before {
      content: attr(data-piece);
      position: absolute;
      bottom: -30px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0,0,0,0.8);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      white-space: nowrap;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
      pointer-events: none;
    }
    .marker:hover::before {
      opacity: 1;
      visibility: visible;
    }
    #info {
      margin-top: 20px;
      padding: 15px;
      border: 2px solid #333;
      min-height: 100px;
      background-color: #f9f9f9;
      border-radius: 8px;
    }
    #retry-btn {
      display: none;
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 16px;
      background: #4CAF50;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    #retry-btn:hover {
      background: #45a049;
    }
    

    .guestbook-section {
      margin-top: 40px;
      padding: 20px;
      border: 2px solid #4CAF50;
      border-radius: 8px;
      background: #f0f8f0;
    }
    .guestbook-form {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    .guestbook-form input, .guestbook-form textarea {
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-family: inherit;
    }
    .guestbook-form input {
      flex: 1;
      min-width: 200px;
    }
    .guestbook-form textarea {
      flex: 2;
      min-width: 300px;
      height: 80px;
      resize: vertical;
    }
    .guestbook-btn {
      padding: 8px 20px;
      background: #4CAF50;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
    }
    .guestbook-btn:hover {
      background: #45a049;
    }
    .guestbook-list {
      max-height: 300px;
      overflow-y: auto;
      border: 1px solid #ddd;
      border-radius: 4px;
      background: white;
    }
    .guest-entry {
      padding: 12px;
      border-bottom: 1px solid #eee;
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
    }
    .guest-entry:last-child {
      border-bottom: none;
    }
    .guest-name {
      font-weight: bold;
      color: #2c5aa0;
    }
    .guest-comment {
      flex: 1;
      margin-left: 10px;
      color: #333;
    }
    .guest-date {
      font-size: 12px;
      color: #666;
    }
    @media (max-width: 600px) {
      .guestbook-form {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <h1>üõ†Ô∏è Piezas Interactivas del Auto</h1>
  
  <div class="auto-container">
    <img class="auto" src="imagen_carro.png" alt="Auto interactivo" />
    <div class="marker" style="top: 70%; left: 15%;" data-piece="Rueda Delantera">+</div>
    <div class="marker" style="top: 70%; left: 75%;" data-piece="Rueda Trasera">+</div>
    <div class="marker" style="top: 45%; left: 50%;" data-piece="Motor">+</div>
    <div class="marker" style="top: 30%; left: 35%;" data-piece="Puerta Delantera">+</div>
    <div class="marker" style="top: 50%; left: 70%;" data-piece="Puerta Trasera">+</div>
    <div class="marker" style="top: 20%; left: 50%;" data-piece="Carrocer√≠a">+</div>
  </div>
  
  <div id="info">üñ±Ô∏è Pasa el mouse sobre las cruces rojas (+) y haz clic para aprender sobre cada pieza del auto.</div>
  <button id="retry-btn">üîÑ Reintentar Quiz</button>

 
  <div class="guestbook-section">
    <h2>üìñ Libro de Visitas</h2>
    <div class="guestbook-form">
      <input type="text" id="visitorName" placeholder="Tu nombre" maxlength="50" required>
      <textarea id="visitorComment" placeholder="Deja tu comentario sobre las piezas del auto..." maxlength="500" required></textarea>
      <button class="guestbook-btn" onclick="saveGuestEntry()">üíæ Guardar</button>
    </div>
    <div id="guestbookList" class="guestbook-list">
      <p style="text-align: center; color: #666; padding: 20px;">No hay mensajes a√∫n. ¬°S√© el primero!</p>
    </div>
  </div>

  <script>

    var infoData = {
      'Rueda Delantera': 'üîß La rueda delantera soporta parte del peso del auto y permite la direcci√≥n mediante el sistema de direcci√≥n.',
      'Rueda Trasera': 'üîß La rueda trasera ayuda a la tracci√≥n y estabilidad del veh√≠culo, especialmente en curvas.',
      'Motor': '‚öôÔ∏è El motor convierte el combustible en energ√≠a mec√°nica para mover el auto.',
      'Puerta Delantera': 'üö™ La puerta delantera permite entrar y salir del auto por la parte delantera.',
      'Puerta Trasera': 'üö™ La puerta trasera da acceso a los asientos traseros del veh√≠culo.',
      'Carrocer√≠a': 'üèóÔ∏è La carrocer√≠a es la estructura exterior que protege el interior y define la forma del auto.'
    };

    var infoBox = document.getElementById('info');
    var markers = document.querySelectorAll('.marker');
    var clickedPieces = {};
    var retryBtn = document.getElementById('retry-btn');
    var guestbookList = document.getElementById('guestbookList');

    var questions = [
      {q: "1. ¬øCu√°l es la funci√≥n principal del motor?", options: ["A) Sostener el veh√≠culo", "B) Proporcionar energ√≠a", "C) Abrir puertas"], correct: "B) Proporcionar energ√≠a" },
      {q: "2. ¬øQu√© protege el interior del auto?", options: ["A) Carrocer√≠a", "B) Motor", "C) Ruedas"], correct: "A) Carrocer√≠a" },
      {q: "3. ¬øPara entrar/salir del auto?", options: ["A) Puertas", "B) Motor", "C) Carrocer√≠a"], correct: "A) Puertas" },
      {q: "4. ¬øQu√© hace contacto con el suelo?", options: ["A) Ruedas", "B) Motor", "C) Puertas"], correct: "A) Ruedas" }
    ];


    function showInfo(piece) {
      infoBox.innerHTML = `<strong>${piece}:</strong> ${infoData[piece]}`;
      clickedPieces[piece] = true;
      
      if(Object.keys(clickedPieces).length === markers.length) {
        setTimeout(startQuiz, 1000);
      }
    }

    function startQuiz() {
      infoBox.innerHTML = 'üéâ ¬°Excelente! Has explorado todas las piezas. ¬°Ahora el quiz!';
      setTimeout(() => {
        let score = 0;
        for(let i = 0; i < questions.length; i++) {
          const item = questions[i];
          const answer = prompt(item.q + '\n' + item.options.join('\n') + '\nEscribe A, B o C:');
          if(answer && answer.toUpperCase() === item.correct.charAt(0)) {
            score++;
          }
        }
        const result = `‚úÖ ¬°Resultado: ${score}/${questions.length} correctas!`;
        infoBox.innerHTML = result;
        if(score < questions.length) {
          retryBtn.style.display = 'inline-block';
        }
      }, 500);
    }

    markers.forEach(marker => {
      marker.addEventListener('click', () => {
        const pieza = marker.getAttribute('data-piece');
        showInfo(pieza);
        marker.style.background = '#4CAF50';
      });
    });

 
    retryBtn.onclick = () => {
      retryBtn.style.display = 'none';
      clickedPieces = {};
      markers.forEach(m => m.style.background = '#ff4444');
      infoBox.textContent = 'üñ±Ô∏è Pasa el mouse sobre las cruces rojas (+) y haz clic para aprender.';
    };
    function getCurrentDate() {
      return new Date().toLocaleString('es-ES', {
        year: 'numeric', month: 'short', day: 'numeric',
        hour: '2-digit', minute: '2-digit'
      });
    }

    function saveGuestEntry() {
      const name = document.getElementById('visitorName').value.trim();
      const comment = document.getElementById('visitorComment').value.trim();
      
      if(!name || !comment) {
        alert('‚ö†Ô∏è Por favor completa nombre y comentario');
        return;
      }
      const entry = {
        id: Date.now(),
        name: name,
        comment: comment,
        date: getCurrentDate()
      };

      let entries = JSON.parse(localStorage.getItem('guestbook') || '[]');
      entries.unshift(entry); // Nuevo al inicio
      entries = entries.slice(0, 50); // M√°ximo 50 entradas
      localStorage.setItem('guestbook', JSON.stringify(entries));
      
      loadGuestbook();
      document.getElementById('visitorName').value = '';
      document.getElementById('visitorComment').value = '';
      
      alert('‚úÖ ¬°Mensaje guardado exitosamente!');
    }

    function loadGuestbook() {
      const entries = JSON.parse(localStorage.getItem('guestbook') || '[]');
      if(entries.length === 0) {
        guestbookList.innerHTML = '<p style="text-align: center; color: #666; padding: 20px;">No hay mensajes a√∫n. ¬°S√© el primero!</p>';
        return;
      }
      
      guestbookList.innerHTML = entries.map(entry => `
        <div class="guest-entry">
          <div>
            <div class="guest-name">${entry.name}</div>
            <div class="guest-comment">${entry.comment}</div>
          </div>
          <div class="guest-date">${entry.date}</div>
        </div>
      `).join('');
    }
    loadGuestbook();
    document.getElementById('visitorComment').addEventListener('keypress', (e) => {
      if(e.key === 'Enter' && e.ctrlKey) saveGuestEntry();
    });
  </script>
</body>
</html>


